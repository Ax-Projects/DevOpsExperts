pipeline {
    agent{label 'laptop'}
    stages{
        stage('clone-repo'){
            steps{
            git 'https://github.com/Ax-Projects/DevOpsExperts.git'
            }    
        }
        stage('start-backend'){
            steps{
                bat 'start /min python rest_api.py'
            }
        }
        stage('start-frontend'){
            steps{
                bat 'start /min python web_app.py'
            }
        }
        stage('clean-DB'){
            steps{
                bat 'python clean_db.py'
            }
        }
        stage('run-backend-test'){
            steps{
                bat 'python backend_testing.py'
            }
        }
        stage('run-frontend-test'){
            steps{
                bat 'python frontend_testing.py'
            }
        }
        stage('run-combined-tests'){
            steps{
                bat 'python combined_testing.py'
            }
        }
        stage('stop-servers'){
            steps{
                bat 'python clean_environment.py'
            }
        }
    }
}